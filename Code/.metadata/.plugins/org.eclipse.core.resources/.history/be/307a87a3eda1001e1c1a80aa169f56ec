/*
 * app_coap.h
 *
 *  Created on: Jun 2, 2023
 *      Author: edward62740
 */

#ifndef APP_COAP_H_
#define APP_COAP_H_



#ifdef __cplusplus
extern "C" {
#endif


#include "openthread/ip6.h"
#include "app_main.h"

typedef enum
{
	MSG_LIMITED_SPECTRUM,
	MSG_FULL_SPECTRUM,
	MSG_ALIVE,
} app_msg_t ;

const uint16_t COAP_MAX_PAYLOAD_LENGTH = 64U; // max entries of X(k)
const uint16_t COAP_MAX_ITEM_SIZE = sizeof(uint32_t) + sizeof(uint16_t);
const uint16_t COAP_MAX_PAYLOAD_SIZE = COAP_MAX_ITEM_SIZE * COAP_MAX_PAYLOAD_LENGTH; // size of COAP_MAX_PAYLOAD_LENGTH in bytes

extern otIp6Address selfAddr;
extern otIp6Address brAddr;
extern bool appCoapConnectionEstablished; // indicates that the "connection" with upstream server is active

void appCoapInit(void);
void appCoapPermissionsHandler(void *aContext, otMessage *aMessage, const otMessageInfo *aMessageInfo);
bool appCoapCts(app_data_t *data, app_msg_t type);
void appCoapCheckConnection(void);



#ifdef __cplusplus
}
#endif /* __cplusplus */


#endif /* APP_COAP_H_ */
